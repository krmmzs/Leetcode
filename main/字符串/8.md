# 

## 思考

- 准确的说这是一个模拟题, 这里的操作要能记住, 面对这些情况最好能条件反射
- 

## 代码

- longlong的先保证代码逻辑正确, 后再修改成int

```c++
class Solution {
public:
    int myAtoi(string s) {
        int k = 0, n = s.size();
        while (k < n && s[k] == ' ') {
            k ++;
        }
        if (k == n) return 0;

        int minus = 1;
        if (s[k] == '-') {
            minus = -1;
            k ++;
        }
        else if (s[k] == '+') {
            minus = 1;
            k ++;
        }

        long long res = 0;
        while (k < n && s[k] >= '0' && s[k] <= '9') {
            res = res * 10 + s[k] - '0';
            k ++;
            if (res > INT_MAX) break;
        }

        res *= minus;
        if (res > INT_MAX) return INT_MAX;
        if (res < INT_MIN) return INT_MIN;

        return res;
    }
};
```

最终正确处理溢出的代码

```c++
class Solution {
public:
    int myAtoi(string s) {
        int k = 0, n = s.size();
        while (k < n && s[k] == ' ') {
            k ++;
        }
        if (k == n) return 0;

        int minus = 1;
        if (s[k] == '-') {
            minus = -1;
            k ++;
        }
        else if (s[k] == '+') {
            minus = 1;
            k ++;
        }

        int res = 0; // absolute value
        while (k < n && s[k] >= '0' && s[k] <= '9') {
            // res = res * 10 + s[k] - '0';
            int x = s[k] - '0';
            if (minus == 1 && res > (INT_MAX - x) / 10) {
                return INT_MAX;
            }
            else if (minus == -1 && -res < (INT_MIN + x) / 10) {
                return INT_MIN;
            }
            if (-res * 10 - x == INT_MIN) return INT_MIN; // 
            res = res * 10 + x;
            k ++;
        }

        res *= minus;

        return res;
    }
};
```
